{"ast":null,"code":"var _jsxFileName = \"/Users/jaylon_ho/Documents/GitHub/ACManeger/FrontEnd/src/components/LogPage.js\";\nimport React from \"react\";\nimport { Row, Col, Card, Form, Input, Button, message, Icon, Checkbox, notification } from \"antd\";\nimport { Redirect, Link } from \"react-router-dom\";\n\nclass LogPage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      redirect: false,\n      username: '',\n      password: '',\n      remind: '',\n      rememberPassword: false,\n      fromPath: '/'\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let userInfo = this.props.form.getFieldsValue();\n      this.props.form.validateFields((err, values) => {\n        if (!err) {\n          let formData = new FormData();\n          formData.append(\"telephone\", values.username);\n          formData.append(\"passCode\", values.password);\n          const init = {\n            method: 'POST',\n            body: formData\n          };\n          fetch(\"http://localhost:3000\", init).then(res => res.json()).then(data => {\n            console.log(data);\n\n            if (data) {\n              if (values.remember) {\n                let accountInfo = '';\n                if (this.state.remind === '') accountInfo = values.username + '&' + values.password + '&' + 'true';else accountInfo = values.username + '&' + values.password + '&' + this.state.remind;\n                let Days = 3;\n                let exp = new Date();\n                exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);\n                document.cookie = 'accountInfo' + \"=\" + escape(accountInfo) + \";expires=\" + exp.toGMTString();\n              }\n\n              this.setState({\n                redirect: true\n              });\n              message.success(`${userInfo.username}, welcome`);\n            } else {\n              alert('Password error');\n            }\n          });\n        }\n      });\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Row, {\n      style: {\n        height: 150\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }), React.createElement(Row, {\n      style: {\n        height: 650\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(Card, {\n      title: \"\\u8D26\\u6237\\u767B\\u5F55\",\n      extra: React.createElement(Link, {\n        to: {\n          pathname: this.state.fromPath\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(Button, {\n        type: \"link\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"\\u8FD4\\u56DE\")),\n      color: \"black\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      className: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      span: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default LogPage;","map":{"version":3,"sources":["/Users/jaylon_ho/Documents/GitHub/ACManeger/FrontEnd/src/components/LogPage.js"],"names":["React","Row","Col","Card","Form","Input","Button","message","Icon","Checkbox","notification","Redirect","Link","LogPage","Component","state","redirect","username","password","remind","rememberPassword","fromPath","handleSubmit","e","preventDefault","userInfo","props","form","getFieldsValue","validateFields","err","values","formData","FormData","append","init","method","body","fetch","then","res","json","data","console","log","remember","accountInfo","Days","exp","Date","setTime","getTime","document","cookie","escape","toGMTString","setState","success","alert","render","height","pathname"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Row,\n  Col,\n  Card,\n  Form,\n  Input,\n  Button,\n  message,\n  Icon,\n  Checkbox,\n  notification\n} from \"antd\";\n\nimport { Redirect, Link } from \"react-router-dom\";\n\nclass LogPage extends React.Component {\n  state={\n    redirect:false,\n    username: '',\n    password: '',\n    remind:'',\n    rememberPassword: false,\n    fromPath:'/'\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    let userInfo = this.props.form.getFieldsValue();\n    this.props.form.validateFields((err,values)=>{\n      if(!err){\n        let formData = new FormData();\n        formData.append(\"telephone\",values.username);\n        formData.append(\"passCode\",values.password);\n\n        const init = {\n            method:'POST',\n            body:formData,\n          }\n          fetch(\"http://localhost:3000\",init)\n            .then(res => res.json())\n            .then(data => {\n              console.log(data)\n              if(data){\n                if(values.remember){\n                    let accountInfo = '';\n                    if(this.state.remind === '')\n                      accountInfo = values.username+ '&' +values.password + '&' + 'true';\n                    else accountInfo = values.username+ '&' +values.password + '&' + this.state.remind;\n                    let Days = 3;\n                    let exp = new Date();\n                    exp.setTime(exp.getTime() + Days*24*60*60*1000);\n                    document.cookie = 'accountInfo' + \"=\"+ escape(accountInfo) + \";expires=\" + exp.toGMTString()\n              }\n                this.setState({redirect: true});\n                message.success(`${userInfo.username}, welcome`);\n                }\n              else {\n                alert('Password error');\n              }\n            }\n          )\n        }\n     })\n  }\n\n  render(){\n    return (\n      <div>\n          <Row style={{height:150}}></Row>\n          <Row style={{height:650}}>\n            <Col span={8} />\n            <Col span={8}>\n              <Card title=\"账户登录\" extra={\n                  <Link to={{ pathname:this.state.fromPath }}>\n                    <Button type=\"link\">返回</Button>\n                  </Link>\n                } color='black' >\n              \n               <Form onSubmit={this.handleSubmit} className=\"login-form\">\n                \n               </Form>\n\n              </Card>\n            </Col>\n          <Col span={8} />\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default LogPage;\n"]},"metadata":{},"sourceType":"module"}