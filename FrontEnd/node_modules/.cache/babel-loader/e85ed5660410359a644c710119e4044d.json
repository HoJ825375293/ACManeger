{"ast":null,"code":"import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport contains from 'rc-util/es/Dom/contains';\nimport Animate from 'rc-animate';\nimport LazyRenderBox from './LazyRenderBox';\nimport getScrollBarSize from 'rc-util/es/getScrollBarSize';\nvar uuid = 0;\nvar openCount = 0;\n/* eslint react/no-is-mounted:0 */\n\nfunction getScroll(w, top) {\n  var ret = w['page' + (top ? 'Y' : 'X') + 'Offset'];\n  var method = 'scroll' + (top ? 'Top' : 'Left');\n\n  if (typeof ret !== 'number') {\n    var d = w.document;\n    ret = d.documentElement[method];\n\n    if (typeof ret !== 'number') {\n      ret = d.body[method];\n    }\n  }\n\n  return ret;\n}\n\nfunction setTransformOrigin(node, value) {\n  var style = node.style;\n  ['Webkit', 'Moz', 'Ms', 'ms'].forEach(function (prefix) {\n    style[prefix + 'TransformOrigin'] = value;\n  });\n  style['transformOrigin'] = value;\n}\n\nfunction offset(el) {\n  var rect = el.getBoundingClientRect();\n  var pos = {\n    left: rect.left,\n    top: rect.top\n  };\n  var doc = el.ownerDocument;\n  var w = doc.defaultView || doc.parentWindow;\n  pos.left += getScroll(w);\n  pos.top += getScroll(w, true);\n  return pos;\n}\n\nvar Dialog = function (_React$Component) {\n  _inherits(Dialog, _React$Component);\n\n  function Dialog() {\n    _classCallCheck(this, Dialog);\n\n    var _this = _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n\n    _this.onAnimateLeave = function () {\n      var afterClose = _this.props.afterClose; // need demo?\n      // https://github.com/react-component/dialog/pull/28\n\n      if (_this.wrap) {\n        _this.wrap.style.display = 'none';\n      }\n\n      _this.inTransition = false;\n\n      _this.removeScrollingEffect();\n\n      if (afterClose) {\n        afterClose();\n      }\n    };\n\n    _this.onDialogMouseDown = function () {\n      _this.dialogMouseDown = true;\n    };\n\n    _this.onMaskMouseUp = function () {\n      if (_this.dialogMouseDown) {\n        _this.timeoutId = setTimeout(function () {\n          _this.dialogMouseDown = false;\n        }, 0);\n      }\n    };\n\n    _this.onMaskClick = function (e) {\n      // android trigger click on open (fastclick??)\n      if (Date.now() - _this.openTime < 300) {\n        return;\n      }\n\n      if (e.target === e.currentTarget && !_this.dialogMouseDown) {\n        _this.close(e);\n      }\n    };\n\n    _this.onKeyDown = function (e) {\n      var props = _this.props;\n\n      if (props.keyboard && e.keyCode === KeyCode.ESC) {\n        e.stopPropagation();\n\n        _this.close(e);\n\n        return;\n      } // keep focus inside dialog\n\n\n      if (props.visible) {\n        if (e.keyCode === KeyCode.TAB) {\n          var activeElement = document.activeElement;\n          var sentinelStart = _this.sentinelStart;\n\n          if (e.shiftKey) {\n            if (activeElement === sentinelStart) {\n              _this.sentinelEnd.focus();\n            }\n          } else if (activeElement === _this.sentinelEnd) {\n            sentinelStart.focus();\n          }\n        }\n      }\n    };\n\n    _this.getDialogElement = function () {\n      var props = _this.props;\n      var closable = props.closable;\n      var prefixCls = props.prefixCls;\n      var dest = {};\n\n      if (props.width !== undefined) {\n        dest.width = props.width;\n      }\n\n      if (props.height !== undefined) {\n        dest.height = props.height;\n      }\n\n      var footer = void 0;\n\n      if (props.footer) {\n        footer = React.createElement(\"div\", {\n          className: prefixCls + '-footer',\n          ref: _this.saveRef('footer')\n        }, props.footer);\n      }\n\n      var header = void 0;\n\n      if (props.title) {\n        header = React.createElement(\"div\", {\n          className: prefixCls + '-header',\n          ref: _this.saveRef('header')\n        }, React.createElement(\"div\", {\n          className: prefixCls + '-title',\n          id: _this.titleId\n        }, props.title));\n      }\n\n      var closer = void 0;\n\n      if (closable) {\n        closer = React.createElement(\"button\", {\n          type: \"button\",\n          onClick: _this.close,\n          \"aria-label\": \"Close\",\n          className: prefixCls + '-close'\n        }, props.closeIcon || React.createElement(\"span\", {\n          className: prefixCls + '-close-x'\n        }));\n      }\n\n      var style = _extends({}, props.style, dest);\n\n      var sentinelStyle = {\n        width: 0,\n        height: 0,\n        overflow: 'hidden'\n      };\n\n      var transitionName = _this.getTransitionName();\n\n      var dialogElement = React.createElement(LazyRenderBox, {\n        key: \"dialog-element\",\n        role: \"document\",\n        ref: _this.saveRef('dialog'),\n        style: style,\n        className: prefixCls + ' ' + (props.className || ''),\n        visible: props.visible,\n        onMouseDown: _this.onDialogMouseDown\n      }, React.createElement(\"div\", {\n        tabIndex: 0,\n        ref: _this.saveRef('sentinelStart'),\n        style: sentinelStyle,\n        \"aria-hidden\": \"true\"\n      }), React.createElement(\"div\", {\n        className: prefixCls + '-content'\n      }, closer, header, React.createElement(\"div\", _extends({\n        className: prefixCls + '-body',\n        style: props.bodyStyle,\n        ref: _this.saveRef('body')\n      }, props.bodyProps), props.children), footer), React.createElement(\"div\", {\n        tabIndex: 0,\n        ref: _this.saveRef('sentinelEnd'),\n        style: sentinelStyle,\n        \"aria-hidden\": \"true\"\n      }));\n      return React.createElement(Animate, {\n        key: \"dialog\",\n        showProp: \"visible\",\n        onLeave: _this.onAnimateLeave,\n        transitionName: transitionName,\n        component: \"\",\n        transitionAppear: true\n      }, props.visible || !props.destroyOnClose ? dialogElement : null);\n    };\n\n    _this.getZIndexStyle = function () {\n      var style = {};\n      var props = _this.props;\n\n      if (props.zIndex !== undefined) {\n        style.zIndex = props.zIndex;\n      }\n\n      return style;\n    };\n\n    _this.getWrapStyle = function () {\n      return _extends({}, _this.getZIndexStyle(), _this.props.wrapStyle);\n    };\n\n    _this.getMaskStyle = function () {\n      return _extends({}, _this.getZIndexStyle(), _this.props.maskStyle);\n    };\n\n    _this.getMaskElement = function () {\n      var props = _this.props;\n      var maskElement = void 0;\n\n      if (props.mask) {\n        var maskTransition = _this.getMaskTransitionName();\n\n        maskElement = React.createElement(LazyRenderBox, _extends({\n          style: _this.getMaskStyle(),\n          key: \"mask\",\n          className: props.prefixCls + '-mask',\n          hiddenClassName: props.prefixCls + '-mask-hidden',\n          visible: props.visible\n        }, props.maskProps));\n\n        if (maskTransition) {\n          maskElement = React.createElement(Animate, {\n            key: \"mask\",\n            showProp: \"visible\",\n            transitionAppear: true,\n            component: \"\",\n            transitionName: maskTransition\n          }, maskElement);\n        }\n      }\n\n      return maskElement;\n    };\n\n    _this.getMaskTransitionName = function () {\n      var props = _this.props;\n      var transitionName = props.maskTransitionName;\n      var animation = props.maskAnimation;\n\n      if (!transitionName && animation) {\n        transitionName = props.prefixCls + '-' + animation;\n      }\n\n      return transitionName;\n    };\n\n    _this.getTransitionName = function () {\n      var props = _this.props;\n      var transitionName = props.transitionName;\n      var animation = props.animation;\n\n      if (!transitionName && animation) {\n        transitionName = props.prefixCls + '-' + animation;\n      }\n\n      return transitionName;\n    };\n\n    _this.setScrollbar = function () {\n      if (_this.bodyIsOverflowing && _this.scrollbarWidth !== undefined) {\n        document.body.style.paddingRight = _this.scrollbarWidth + 'px';\n      }\n    };\n\n    _this.addScrollingEffect = function () {\n      openCount++;\n\n      if (openCount !== 1) {\n        return;\n      }\n\n      _this.checkScrollbar();\n\n      _this.setScrollbar();\n\n      document.body.style.overflow = 'hidden'; // this.adjustDialog();\n    };\n\n    _this.removeScrollingEffect = function () {\n      openCount--;\n\n      if (openCount !== 0) {\n        return;\n      }\n\n      document.body.style.overflow = '';\n\n      _this.resetScrollbar(); // this.resetAdjustments();\n\n    };\n\n    _this.close = function (e) {\n      var onClose = _this.props.onClose;\n\n      if (onClose) {\n        onClose(e);\n      }\n    };\n\n    _this.checkScrollbar = function () {\n      var fullWindowWidth = window.innerWidth;\n\n      if (!fullWindowWidth) {\n        // workaround for missing window.innerWidth in IE8\n        var documentElementRect = document.documentElement.getBoundingClientRect();\n        fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n      }\n\n      _this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth;\n\n      if (_this.bodyIsOverflowing) {\n        _this.scrollbarWidth = getScrollBarSize();\n      }\n    };\n\n    _this.resetScrollbar = function () {\n      document.body.style.paddingRight = '';\n    };\n\n    _this.adjustDialog = function () {\n      if (_this.wrap && _this.scrollbarWidth !== undefined) {\n        var modalIsOverflowing = _this.wrap.scrollHeight > document.documentElement.clientHeight;\n        _this.wrap.style.paddingLeft = (!_this.bodyIsOverflowing && modalIsOverflowing ? _this.scrollbarWidth : '') + 'px';\n        _this.wrap.style.paddingRight = (_this.bodyIsOverflowing && !modalIsOverflowing ? _this.scrollbarWidth : '') + 'px';\n      }\n    };\n\n    _this.resetAdjustments = function () {\n      if (_this.wrap) {\n        _this.wrap.style.paddingLeft = _this.wrap.style.paddingLeft = '';\n      }\n    };\n\n    _this.saveRef = function (name) {\n      return function (node) {\n        _this[name] = node;\n      };\n    };\n\n    return _this;\n  }\n\n  Dialog.prototype.componentWillMount = function componentWillMount() {\n    this.inTransition = false;\n    this.titleId = 'rcDialogTitle' + uuid++;\n  };\n\n  Dialog.prototype.componentDidMount = function componentDidMount() {\n    this.componentDidUpdate({}); // if forceRender is true, set element style display to be none;\n\n    if (this.props.forceRender && this.wrap) {\n      this.wrap.style.display = 'none';\n    }\n  };\n\n  Dialog.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var props = this.props;\n    var mousePosition = this.props.mousePosition;\n\n    if (props.visible) {\n      // first show\n      if (!prevProps.visible) {\n        this.openTime = Date.now();\n        this.addScrollingEffect();\n        this.tryFocus();\n        var dialogNode = ReactDOM.findDOMNode(this.dialog);\n\n        if (mousePosition) {\n          var elOffset = offset(dialogNode);\n          setTransformOrigin(dialogNode, mousePosition.x - elOffset.left + 'px ' + (mousePosition.y - elOffset.top) + 'px');\n        } else {\n          setTransformOrigin(dialogNode, '');\n        }\n      }\n    } else if (prevProps.visible) {\n      this.inTransition = true;\n\n      if (props.mask && this.lastOutSideFocusNode) {\n        try {\n          this.lastOutSideFocusNode.focus();\n        } catch (e) {\n          this.lastOutSideFocusNode = null;\n        }\n\n        this.lastOutSideFocusNode = null;\n      }\n    }\n  };\n\n  Dialog.prototype.componentWillUnmount = function componentWillUnmount() {\n    if (this.props.visible || this.inTransition) {\n      this.removeScrollingEffect();\n    }\n\n    clearTimeout(this.timeoutId);\n  };\n\n  Dialog.prototype.tryFocus = function tryFocus() {\n    if (!contains(this.wrap, document.activeElement)) {\n      this.lastOutSideFocusNode = document.activeElement;\n      this.sentinelStart.focus();\n    }\n  };\n\n  Dialog.prototype.render = function render() {\n    var props = this.props;\n    var prefixCls = props.prefixCls,\n        maskClosable = props.maskClosable;\n    var style = this.getWrapStyle(); // clear hide display\n    // and only set display after async anim, not here for hide\n\n    if (props.visible) {\n      style.display = null;\n    }\n\n    return React.createElement(\"div\", null, this.getMaskElement(), React.createElement(\"div\", _extends({\n      tabIndex: -1,\n      onKeyDown: this.onKeyDown,\n      className: prefixCls + '-wrap ' + (props.wrapClassName || ''),\n      ref: this.saveRef('wrap'),\n      onClick: maskClosable ? this.onMaskClick : null,\n      onMouseUp: maskClosable ? this.onMaskMouseUp : null,\n      role: \"dialog\",\n      \"aria-labelledby\": props.title ? this.titleId : null,\n      style: style\n    }, props.wrapProps), this.getDialogElement()));\n  };\n\n  return Dialog;\n}(React.Component);\n\nexport default Dialog;\nDialog.defaultProps = {\n  className: '',\n  mask: true,\n  visible: false,\n  keyboard: true,\n  closable: true,\n  maskClosable: true,\n  destroyOnClose: false,\n  prefixCls: 'rc-dialog'\n};","map":{"version":3,"sources":["/Users/jaylon_ho/Documents/GitHub/ACManeger/FrontEnd/node_modules/rc-dialog/es/Dialog.js"],"names":["_extends","_classCallCheck","_possibleConstructorReturn","_inherits","React","ReactDOM","KeyCode","contains","Animate","LazyRenderBox","getScrollBarSize","uuid","openCount","getScroll","w","top","ret","method","d","document","documentElement","body","setTransformOrigin","node","value","style","forEach","prefix","offset","el","rect","getBoundingClientRect","pos","left","doc","ownerDocument","defaultView","parentWindow","Dialog","_React$Component","_this","apply","arguments","onAnimateLeave","afterClose","props","wrap","display","inTransition","removeScrollingEffect","onDialogMouseDown","dialogMouseDown","onMaskMouseUp","timeoutId","setTimeout","onMaskClick","e","Date","now","openTime","target","currentTarget","close","onKeyDown","keyboard","keyCode","ESC","stopPropagation","visible","TAB","activeElement","sentinelStart","shiftKey","sentinelEnd","focus","getDialogElement","closable","prefixCls","dest","width","undefined","height","footer","createElement","className","ref","saveRef","header","title","id","titleId","closer","type","onClick","closeIcon","sentinelStyle","overflow","transitionName","getTransitionName","dialogElement","key","role","onMouseDown","tabIndex","bodyStyle","bodyProps","children","showProp","onLeave","component","transitionAppear","destroyOnClose","getZIndexStyle","zIndex","getWrapStyle","wrapStyle","getMaskStyle","maskStyle","getMaskElement","maskElement","mask","maskTransition","getMaskTransitionName","hiddenClassName","maskProps","maskTransitionName","animation","maskAnimation","setScrollbar","bodyIsOverflowing","scrollbarWidth","paddingRight","addScrollingEffect","checkScrollbar","resetScrollbar","onClose","fullWindowWidth","window","innerWidth","documentElementRect","right","Math","abs","clientWidth","adjustDialog","modalIsOverflowing","scrollHeight","clientHeight","paddingLeft","resetAdjustments","name","prototype","componentWillMount","componentDidMount","componentDidUpdate","forceRender","prevProps","mousePosition","tryFocus","dialogNode","findDOMNode","dialog","elOffset","x","y","lastOutSideFocusNode","componentWillUnmount","clearTimeout","render","maskClosable","wrapClassName","onMouseUp","wrapProps","Component","defaultProps"],"mappings":"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","sourcesContent":["import _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport KeyCode from 'rc-util/es/KeyCode';\nimport contains from 'rc-util/es/Dom/contains';\nimport Animate from 'rc-animate';\nimport LazyRenderBox from './LazyRenderBox';\nimport getScrollBarSize from 'rc-util/es/getScrollBarSize';\nvar uuid = 0;\nvar openCount = 0;\n/* eslint react/no-is-mounted:0 */\nfunction getScroll(w, top) {\n    var ret = w['page' + (top ? 'Y' : 'X') + 'Offset'];\n    var method = 'scroll' + (top ? 'Top' : 'Left');\n    if (typeof ret !== 'number') {\n        var d = w.document;\n        ret = d.documentElement[method];\n        if (typeof ret !== 'number') {\n            ret = d.body[method];\n        }\n    }\n    return ret;\n}\nfunction setTransformOrigin(node, value) {\n    var style = node.style;\n    ['Webkit', 'Moz', 'Ms', 'ms'].forEach(function (prefix) {\n        style[prefix + 'TransformOrigin'] = value;\n    });\n    style['transformOrigin'] = value;\n}\nfunction offset(el) {\n    var rect = el.getBoundingClientRect();\n    var pos = {\n        left: rect.left,\n        top: rect.top\n    };\n    var doc = el.ownerDocument;\n    var w = doc.defaultView || doc.parentWindow;\n    pos.left += getScroll(w);\n    pos.top += getScroll(w, true);\n    return pos;\n}\n\nvar Dialog = function (_React$Component) {\n    _inherits(Dialog, _React$Component);\n\n    function Dialog() {\n        _classCallCheck(this, Dialog);\n\n        var _this = _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n\n        _this.onAnimateLeave = function () {\n            var afterClose = _this.props.afterClose;\n            // need demo?\n            // https://github.com/react-component/dialog/pull/28\n\n            if (_this.wrap) {\n                _this.wrap.style.display = 'none';\n            }\n            _this.inTransition = false;\n            _this.removeScrollingEffect();\n            if (afterClose) {\n                afterClose();\n            }\n        };\n        _this.onDialogMouseDown = function () {\n            _this.dialogMouseDown = true;\n        };\n        _this.onMaskMouseUp = function () {\n            if (_this.dialogMouseDown) {\n                _this.timeoutId = setTimeout(function () {\n                    _this.dialogMouseDown = false;\n                }, 0);\n            }\n        };\n        _this.onMaskClick = function (e) {\n            // android trigger click on open (fastclick??)\n            if (Date.now() - _this.openTime < 300) {\n                return;\n            }\n            if (e.target === e.currentTarget && !_this.dialogMouseDown) {\n                _this.close(e);\n            }\n        };\n        _this.onKeyDown = function (e) {\n            var props = _this.props;\n            if (props.keyboard && e.keyCode === KeyCode.ESC) {\n                e.stopPropagation();\n                _this.close(e);\n                return;\n            }\n            // keep focus inside dialog\n            if (props.visible) {\n                if (e.keyCode === KeyCode.TAB) {\n                    var activeElement = document.activeElement;\n                    var sentinelStart = _this.sentinelStart;\n                    if (e.shiftKey) {\n                        if (activeElement === sentinelStart) {\n                            _this.sentinelEnd.focus();\n                        }\n                    } else if (activeElement === _this.sentinelEnd) {\n                        sentinelStart.focus();\n                    }\n                }\n            }\n        };\n        _this.getDialogElement = function () {\n            var props = _this.props;\n            var closable = props.closable;\n            var prefixCls = props.prefixCls;\n            var dest = {};\n            if (props.width !== undefined) {\n                dest.width = props.width;\n            }\n            if (props.height !== undefined) {\n                dest.height = props.height;\n            }\n            var footer = void 0;\n            if (props.footer) {\n                footer = React.createElement(\"div\", { className: prefixCls + '-footer', ref: _this.saveRef('footer') }, props.footer);\n            }\n            var header = void 0;\n            if (props.title) {\n                header = React.createElement(\"div\", { className: prefixCls + '-header', ref: _this.saveRef('header') }, React.createElement(\"div\", { className: prefixCls + '-title', id: _this.titleId }, props.title));\n            }\n            var closer = void 0;\n            if (closable) {\n                closer = React.createElement(\"button\", { type: \"button\", onClick: _this.close, \"aria-label\": \"Close\", className: prefixCls + '-close' }, props.closeIcon || React.createElement(\"span\", { className: prefixCls + '-close-x' }));\n            }\n            var style = _extends({}, props.style, dest);\n            var sentinelStyle = { width: 0, height: 0, overflow: 'hidden' };\n            var transitionName = _this.getTransitionName();\n            var dialogElement = React.createElement(LazyRenderBox, { key: \"dialog-element\", role: \"document\", ref: _this.saveRef('dialog'), style: style, className: prefixCls + ' ' + (props.className || ''), visible: props.visible, onMouseDown: _this.onDialogMouseDown }, React.createElement(\"div\", { tabIndex: 0, ref: _this.saveRef('sentinelStart'), style: sentinelStyle, \"aria-hidden\": \"true\" }), React.createElement(\"div\", { className: prefixCls + '-content' }, closer, header, React.createElement(\"div\", _extends({ className: prefixCls + '-body', style: props.bodyStyle, ref: _this.saveRef('body') }, props.bodyProps), props.children), footer), React.createElement(\"div\", { tabIndex: 0, ref: _this.saveRef('sentinelEnd'), style: sentinelStyle, \"aria-hidden\": \"true\" }));\n            return React.createElement(Animate, { key: \"dialog\", showProp: \"visible\", onLeave: _this.onAnimateLeave, transitionName: transitionName, component: \"\", transitionAppear: true }, props.visible || !props.destroyOnClose ? dialogElement : null);\n        };\n        _this.getZIndexStyle = function () {\n            var style = {};\n            var props = _this.props;\n            if (props.zIndex !== undefined) {\n                style.zIndex = props.zIndex;\n            }\n            return style;\n        };\n        _this.getWrapStyle = function () {\n            return _extends({}, _this.getZIndexStyle(), _this.props.wrapStyle);\n        };\n        _this.getMaskStyle = function () {\n            return _extends({}, _this.getZIndexStyle(), _this.props.maskStyle);\n        };\n        _this.getMaskElement = function () {\n            var props = _this.props;\n            var maskElement = void 0;\n            if (props.mask) {\n                var maskTransition = _this.getMaskTransitionName();\n                maskElement = React.createElement(LazyRenderBox, _extends({ style: _this.getMaskStyle(), key: \"mask\", className: props.prefixCls + '-mask', hiddenClassName: props.prefixCls + '-mask-hidden', visible: props.visible }, props.maskProps));\n                if (maskTransition) {\n                    maskElement = React.createElement(Animate, { key: \"mask\", showProp: \"visible\", transitionAppear: true, component: \"\", transitionName: maskTransition }, maskElement);\n                }\n            }\n            return maskElement;\n        };\n        _this.getMaskTransitionName = function () {\n            var props = _this.props;\n            var transitionName = props.maskTransitionName;\n            var animation = props.maskAnimation;\n            if (!transitionName && animation) {\n                transitionName = props.prefixCls + '-' + animation;\n            }\n            return transitionName;\n        };\n        _this.getTransitionName = function () {\n            var props = _this.props;\n            var transitionName = props.transitionName;\n            var animation = props.animation;\n            if (!transitionName && animation) {\n                transitionName = props.prefixCls + '-' + animation;\n            }\n            return transitionName;\n        };\n        _this.setScrollbar = function () {\n            if (_this.bodyIsOverflowing && _this.scrollbarWidth !== undefined) {\n                document.body.style.paddingRight = _this.scrollbarWidth + 'px';\n            }\n        };\n        _this.addScrollingEffect = function () {\n            openCount++;\n            if (openCount !== 1) {\n                return;\n            }\n            _this.checkScrollbar();\n            _this.setScrollbar();\n            document.body.style.overflow = 'hidden';\n            // this.adjustDialog();\n        };\n        _this.removeScrollingEffect = function () {\n            openCount--;\n            if (openCount !== 0) {\n                return;\n            }\n            document.body.style.overflow = '';\n            _this.resetScrollbar();\n            // this.resetAdjustments();\n        };\n        _this.close = function (e) {\n            var onClose = _this.props.onClose;\n\n            if (onClose) {\n                onClose(e);\n            }\n        };\n        _this.checkScrollbar = function () {\n            var fullWindowWidth = window.innerWidth;\n            if (!fullWindowWidth) {\n                // workaround for missing window.innerWidth in IE8\n                var documentElementRect = document.documentElement.getBoundingClientRect();\n                fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n            }\n            _this.bodyIsOverflowing = document.body.clientWidth < fullWindowWidth;\n            if (_this.bodyIsOverflowing) {\n                _this.scrollbarWidth = getScrollBarSize();\n            }\n        };\n        _this.resetScrollbar = function () {\n            document.body.style.paddingRight = '';\n        };\n        _this.adjustDialog = function () {\n            if (_this.wrap && _this.scrollbarWidth !== undefined) {\n                var modalIsOverflowing = _this.wrap.scrollHeight > document.documentElement.clientHeight;\n                _this.wrap.style.paddingLeft = (!_this.bodyIsOverflowing && modalIsOverflowing ? _this.scrollbarWidth : '') + 'px';\n                _this.wrap.style.paddingRight = (_this.bodyIsOverflowing && !modalIsOverflowing ? _this.scrollbarWidth : '') + 'px';\n            }\n        };\n        _this.resetAdjustments = function () {\n            if (_this.wrap) {\n                _this.wrap.style.paddingLeft = _this.wrap.style.paddingLeft = '';\n            }\n        };\n        _this.saveRef = function (name) {\n            return function (node) {\n                _this[name] = node;\n            };\n        };\n        return _this;\n    }\n\n    Dialog.prototype.componentWillMount = function componentWillMount() {\n        this.inTransition = false;\n        this.titleId = 'rcDialogTitle' + uuid++;\n    };\n\n    Dialog.prototype.componentDidMount = function componentDidMount() {\n        this.componentDidUpdate({});\n        // if forceRender is true, set element style display to be none;\n        if (this.props.forceRender && this.wrap) {\n            this.wrap.style.display = 'none';\n        }\n    };\n\n    Dialog.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n        var props = this.props;\n        var mousePosition = this.props.mousePosition;\n        if (props.visible) {\n            // first show\n            if (!prevProps.visible) {\n                this.openTime = Date.now();\n                this.addScrollingEffect();\n                this.tryFocus();\n                var dialogNode = ReactDOM.findDOMNode(this.dialog);\n                if (mousePosition) {\n                    var elOffset = offset(dialogNode);\n                    setTransformOrigin(dialogNode, mousePosition.x - elOffset.left + 'px ' + (mousePosition.y - elOffset.top) + 'px');\n                } else {\n                    setTransformOrigin(dialogNode, '');\n                }\n            }\n        } else if (prevProps.visible) {\n            this.inTransition = true;\n            if (props.mask && this.lastOutSideFocusNode) {\n                try {\n                    this.lastOutSideFocusNode.focus();\n                } catch (e) {\n                    this.lastOutSideFocusNode = null;\n                }\n                this.lastOutSideFocusNode = null;\n            }\n        }\n    };\n\n    Dialog.prototype.componentWillUnmount = function componentWillUnmount() {\n        if (this.props.visible || this.inTransition) {\n            this.removeScrollingEffect();\n        }\n        clearTimeout(this.timeoutId);\n    };\n\n    Dialog.prototype.tryFocus = function tryFocus() {\n        if (!contains(this.wrap, document.activeElement)) {\n            this.lastOutSideFocusNode = document.activeElement;\n            this.sentinelStart.focus();\n        }\n    };\n\n    Dialog.prototype.render = function render() {\n        var props = this.props;\n        var prefixCls = props.prefixCls,\n            maskClosable = props.maskClosable;\n\n        var style = this.getWrapStyle();\n        // clear hide display\n        // and only set display after async anim, not here for hide\n        if (props.visible) {\n            style.display = null;\n        }\n        return React.createElement(\"div\", null, this.getMaskElement(), React.createElement(\"div\", _extends({ tabIndex: -1, onKeyDown: this.onKeyDown, className: prefixCls + '-wrap ' + (props.wrapClassName || ''), ref: this.saveRef('wrap'), onClick: maskClosable ? this.onMaskClick : null, onMouseUp: maskClosable ? this.onMaskMouseUp : null, role: \"dialog\", \"aria-labelledby\": props.title ? this.titleId : null, style: style }, props.wrapProps), this.getDialogElement()));\n    };\n\n    return Dialog;\n}(React.Component);\n\nexport default Dialog;\n\nDialog.defaultProps = {\n    className: '',\n    mask: true,\n    visible: false,\n    keyboard: true,\n    closable: true,\n    maskClosable: true,\n    destroyOnClose: false,\n    prefixCls: 'rc-dialog'\n};"]},"metadata":{},"sourceType":"module"}